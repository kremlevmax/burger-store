(this["webpackJsonpburger-store"]=this["webpackJsonpburger-store"]||[]).push([[0],{31:function(e,t,n){e.exports={main:"SignUp_main__35jbt",form:"SignUp_form__21rBv",label:"SignUp_label__Do3c3",input:"SignUp_input__2EsVJ",button:"SignUp_button__2FVPE"}},34:function(e,t,n){e.exports={header:"App_header__3ZZ1n",logoContainer:"App_logoContainer__UKLdd",burgerPic:"App_burgerPic__381sH",mainArea:"App_mainArea__1m-lY",ingredientsList:"App_ingredientsList__30mT_",cart:"App_cart__m3HId"}},35:function(e,t,n){e.exports={cartItemImage:"CartItem_cartItemImage__PantA",cartItem:"CartItem_cartItem__20B4S",cartItemDescriptionBlock:"CartItem_cartItemDescriptionBlock__4b61a",cartItemQuantityBlock:"CartItem_cartItemQuantityBlock__3qt2n",plusMinus:"CartItem_plusMinus__1QH0N"}},36:function(e,t,n){e.exports={ingredientImageAndText:"IngredientModal_ingredientImageAndText__1wNeR",ingredientImage:"IngredientModal_ingredientImage__2ATX0",ingredientTextDescription:"IngredientModal_ingredientTextDescription__3FXAE",addButtonArea:"IngredientModal_addButtonArea__SnsPG",ingredientName:"IngredientModal_ingredientName__2Yzh1",closeXButton:"IngredientModal_closeXButton__g6gMb"}},43:function(e,t,n){e.exports={modal:"Modal_modal__P3_V5",modalContent:"Modal_modalContent__1rYYD",closeXButton:"Modal_closeXButton__V_1iD",show:"Modal_show__3x226"}},46:function(e,t,n){e.exports={cart:"Cart_cart__3GqLz",priceAndCalories:"Cart_priceAndCalories__1usgh"}},54:function(e,t,n){e.exports={ingredientItem:"IngredientItem_ingredientItem__1frRy",ingredientItemImage:"IngredientItem_ingredientItemImage__tpVAi",ingredientItemName:"IngredientItem_ingredientItemName__INABZ"}},60:function(e,t,n){e.exports={ingredientsList:"IngredientsList_ingredientsList__35xs2"}},71:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n.n(i),a=n(24),c=n(38),s=n.n(c),o=(n(71),n(43)),d=n.n(o),l=n(8),u=function(e){var t=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};Object(i.useEffect)((function(){return document.body.addEventListener("keydown",t),function(){document.body.removeEventListener("keydown",t)}}));var n=e.show?"".concat(d.a.modal," ").concat(d.a.show):"".concat(d.a.modal),r=Object(l.jsx)("div",{className:n,onClick:e.onClose,children:Object(l.jsxs)("div",{className:d.a.modalContent,onClick:function(e){return e.stopPropagation()},children:[Object(l.jsx)("div",{onClick:e.onClose,className:d.a.closeXButton,children:"X"}),e.children]})});return s.a.createPortal(r,document.body)},m=n(34),j=n.n(m),b=n(0),g=n.n(b),p=n(1),f=n(41),h=n(42),O={ingredientsList:[]},x=Object(f.b)({name:"ingredients",initialState:O,reducers:{fullfillIngredientList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return Object(h.a)(Object(h.a)({},e),{},{ingredientsList:t.payload})}}}),_=x.actions,v=n(16),I=n(59),N=(n(74),n(84),I.a.initializeApp({apiKey:"AIzaSyDkDPtv28NKNnAxKYN_RFTG36lp3-IraAE",authDomain:"burger-store-876ce.firebaseapp.com",databaseURL:"https://burger-store-876ce-default-rtdb.firebaseio.com",projectId:"burger-store-876ce",storageBucket:"burger-store-876ce.appspot.com",messagingSenderId:"848580746617",appId:"1:848580746617:web:047462cde8ec9d0a67e3a8"})),C=N.auth(),k=r.a.createContext(),w=function(e){var t=Object(i.useState)(),n=Object(v.a)(t,2),r=n[0],a=n[1];Object(i.useEffect)((function(){return C.onAuthStateChanged((function(e){return a(e)}))}),[]);var c={currentUser:r,signUp:function(e,t){return C.createUserWithEmailAndPassword(e,t)}};return Object(l.jsx)(k.Provider,{value:c,children:e.children})},y=n(60),A=n.n(y),S=n(54),L=n.n(S),P=n(18),B=function(e){var t=Object(P.d)();return Object(l.jsxs)("div",{className:L.a.ingredientItem,onClick:function(){t.push("?ingredient=".concat(e.item.id))},children:[Object(l.jsx)("div",{className:L.a.ingredientItemName,children:e.item.name}),Object(l.jsx)("div",{className:L.a.ingredientItemImage,style:{backgroundImage:"url(".concat(e.item.image,")")}})]})},T=(n(80),function(){return Object(l.jsx)("div",{className:"shimmerWrapper",children:Object(l.jsx)("div",{className:"shimmer"})})}),D=(n(81),function(e){var t=e.type,n="skeleton ".concat(t);return Object(l.jsx)("div",{className:n})}),M=(n(82),function(){return Object(l.jsxs)("div",{className:"skeletonIngredientsWrapper",children:[Object(l.jsx)("div",{className:"skeletonIngredients",children:[1,2,3,4,5].map((function(e){return Object(l.jsx)(D,{type:"ingredientItem"},e)}))}),Object(l.jsx)(T,{})]})}),F=function(e){return 0===e.ingredients.ingredientsList.length?null:e.ingredients.ingredientsList},E=function(){var e=Object(a.c)(F),t=null===e?Object(l.jsx)(M,{}):e.map((function(e){return Object(l.jsx)(B,{item:{id:e.id,calories:e.calories,description:e.description,image:e.image,name:e.name,price:e.price}},e.id)}));return Object(l.jsx)("div",{className:A.a.ingredientsList,children:t})},U=n(35),R=n.n(U),X=n(17),J={items:(localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]).items||[]},Y=Object(f.b)({name:"cart",initialState:J,reducers:{addItemToCart:function(e,t){var n=t.payload.id,i=Object(X.b)(e,(function(t){e.items.some((function(e){return e.id===n}))?t.items.find((function(e){return e.id===n})).count+=1:t.items.push({id:n,count:1})}));return localStorage.setItem("cart",JSON.stringify(i)),i},deleteItemFromCart:function(e,t){var n=t.payload.id,i=e.items.indexOf(e.items.find((function(e){return e.id===n}))),r=Object(X.b)(e,(function(t){1===e.items.find((function(e){return e.id===n})).count?t.items.splice(i,1):t.items.find((function(e){return e.id===n})).count-=1}));return localStorage.setItem("cart",JSON.stringify(r)),r}}}),V=Y.actions,z=function(e){var t=Object(a.b)();return Object(l.jsxs)("div",{className:R.a.cartItem,children:[Object(l.jsxs)("div",{className:R.a.cartItemDescriptionBlock,children:[Object(l.jsx)("div",{className:R.a.cartItemImage,style:{backgroundImage:"url(".concat(e.item.image,")")}}),Object(l.jsx)("div",{className:"ingredient-item-name",children:e.item.name})]}),Object(l.jsxs)("div",{className:R.a.cartItemQuantityBlock,children:[Object(l.jsx)("span",{className:R.a.plusMinus,onClick:function(){t(V.deleteItemFromCart(e.item))},children:"-"}),e.item.count,Object(l.jsx)("span",{className:R.a.plusMinus,onClick:function(){t(V.addItemToCart(e.item))},children:"+"})]})]})},K=n(46),Q=n.n(K),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=[];return 0===e.ingredients.ingredientsList.length?null:(e.cart.items.map((function(n){var i=e.ingredients.ingredientsList.find((function(e){return e.id===n.id}));return t.push(Object(h.a)(Object(h.a)({},i),{},{count:n.count}))})),t)},H=function(e){var t=0,n=0;return e.ingredients.ingredientsList.length>0?e.cart.items.forEach((function(i){var r=e.ingredients.ingredientsList.find((function(e){return e.id===i.id}));t=r?t+r.calories*i.count:0,n=r?n+r.price*i.count:0})):(n=null,t=null),{totalPrice:n,totalCalories:t}},W=function(){var e,t=Object(a.c)(G);e=null!=t?t.map((function(e){return Object(l.jsx)(z,{item:{id:e.id,image:e.image,name:e.name,count:e.count}},e.id)})):Object(l.jsx)(D,{type:"cartItem"});var n=Object(a.c)(H),i=n.totalPrice,r=n.totalCalories,c=null===r?Object(l.jsx)(D,{}):Object(l.jsxs)("div",{children:[" Calories: ",r," kcal"]}),s=null===i?Object(l.jsx)("div",{children:Object(l.jsx)(D,{type:"caloriesAndPrice"})}):Object(l.jsxs)("div",{children:[" Total: ",i.toFixed(2)," $"]});return Object(l.jsxs)("div",{className:Q.a.cart,children:[e,Object(l.jsxs)("div",{className:Q.a.priceAndCalories,children:[Object(l.jsx)("div",{className:Q.a.totalPriceCaloriesDiv,children:s}),Object(l.jsx)("div",{className:Q.a.totalPriceCaloriesDiv,children:c})]})]})},Z=function(e){return e.cart},q=n(36),$=n.n(q),ee=function(e){var t=Object(a.b)(),n=Object(a.c)(Z),i=n.items.find((function(t){return t.id===e.ingredient.id}))?n.items.find((function(t){return t.id===e.ingredient.id})).count:0,r=i>0?"You already have ".concat(i," pieces of this item in your cart"):"Add to Cart";return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:$.a.ingredientImageAndText,children:[Object(l.jsx)("div",{className:$.a.ingredientImage,style:{backgroundImage:"url(".concat(e.ingredient.image,")")}}),Object(l.jsxs)("div",{className:$.a.ingredientTextDescription,children:[Object(l.jsx)("div",{className:$.a.ingredientName,children:e.ingredient.name}),Object(l.jsx)("div",{children:e.ingredient.description}),Object(l.jsxs)("div",{children:["Calories: ",e.ingredient.calories]}),Object(l.jsxs)("div",{children:["Price: ",e.ingredient.price]})]})]}),Object(l.jsx)("div",{className:$.a.addButtonArea,children:Object(l.jsx)("button",{className:$.a.addButton,onClick:function(){return n=e.ingredient,void t(V.addItemToCart(n));var n},children:r})})]})},te=n(31),ne=n.n(te),ie=function(e){var t=Object(i.useRef)(),n=Object(i.useRef)(),r=Object(i.useRef)(),a=Object(i.useContext)(k),c=a.signUp,s=(a.currentUser,Object(i.useState)(!1)),o=Object(v.a)(s,2),d=o[0],u=o[1],m=Object(i.useState)(),j=Object(v.a)(m,2),b=(j[0],j[1]),f=function(){var e=Object(p.a)(g.a.mark((function e(i){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),n.current.value===r.current.value){e.next=3;break}return e.abrupt("return",b("Passwords do not match"));case 3:return e.prev=3,u(!0),b(),e.next=8,c(t.current.value,n.current.value);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),b("Failed to create account");case 13:u(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:ne.a.main,children:Object(l.jsxs)("form",{onSubmit:f,className:ne.a.form,children:[Object(l.jsx)("label",{htmlFor:"email",className:ne.a.label,children:"Email:"}),Object(l.jsx)("input",{type:"text",id:"email",name:"email",ref:t,className:ne.a.input}),Object(l.jsx)("label",{htmlFor:"password",className:ne.a.label,children:"Password:"}),Object(l.jsx)("input",{type:"password",id:"password",name:"password",ref:n,className:ne.a.input}),Object(l.jsx)("label",{htmlFor:"password",className:ne.a.label,children:"Confirm Password:"}),Object(l.jsx)("input",{type:"password",id:"passwordConfirmation",name:"passwordConfirmation",ref:r,className:ne.a.input}),Object(l.jsx)("button",{type:"submit",disabled:d,className:ne.a.button,children:"Sign Up"})]})})};var re=function(){var e,t=Object(a.b)(),n=Object(P.e)(),r=Object(P.d)(),c=new URLSearchParams(n.search).get("ingredient"),s=Object(a.c)((e=c,function(t){return{ingredientToShow:t.ingredients.ingredientsList.find((function(t){return t.id===e}))}})),o=void 0!==s.ingredientToShow||"/login"===n.pathname;Object(i.useEffect)((function(){t(function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(p.a)(g.a.mark((function e(){var n,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(p.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://burger-store-876ce-default-rtdb.firebaseio.com/ingredients.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Couldn't get data from the server");case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,n();case 4:i=e.sent,t(_.fullfillIngredientList(i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),1e3);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);var d=o?Object(l.jsx)(u,{show:o,onClose:function(){return r.push("/")},children:"/login"===n.pathname?Object(l.jsx)(ie,{}):Object(l.jsx)(ee,{ingredient:s.ingredientToShow})}):Object(l.jsx)(l.Fragment,{});return Object(l.jsx)(w,{children:Object(l.jsxs)("div",{className:"App",children:[d,Object(l.jsx)("div",{className:j.a.header,onClick:function(){return r.push("/login")},children:Object(l.jsxs)("div",{className:j.a.logoContainer,children:["iBurger",Object(l.jsx)("span",{className:j.a.burgerPic,children:Object(l.jsx)("i",{className:"fas fa-hamburger"})})]})}),Object(l.jsxs)("div",{className:j.a.mainArea,children:[Object(l.jsx)("div",{className:j.a.ingredientsList,children:Object(l.jsx)(E,{})}),Object(l.jsx)("div",{className:j.a.cart,children:Object(l.jsx)(W,{})})]})]})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))},ce=Object(f.a)({reducer:{ingredients:x.reducer,cart:Y.reducer}}),se=n(48);s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(se.a,{children:Object(l.jsx)(a.a,{store:ce,children:Object(l.jsx)(re,{})})})}),document.getElementById("root")),ae()}},[[83,1,2]]]);
//# sourceMappingURL=main.9fb21fde.chunk.js.map